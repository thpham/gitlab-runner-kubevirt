# Automatically load the Nix development environment
# Requires direnv and nix with flakes enabled

# Use flake if available, fallback to legacy nix-shell
if has nix; then
  if has nix_direnv_version || has use_flake; then
    # Use nix-direnv for better caching
    use flake
  else
    echo "⚠️  Consider installing nix-direnv for better performance"
    echo "   See: https://github.com/nix-community/nix-direnv"
    use flake
  fi
fi

# Watch for changes in these files
watch_file flake.nix
watch_file flake.lock
watch_file go.mod
watch_file go.sum
